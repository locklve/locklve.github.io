<!DOCTYPE html><html class="hide-aside" lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>LanQiao Baseboard Development's log01 | LuvRene's Blog</title><meta name="author" content="LuvRene"><meta name="copyright" content="LuvRene"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="LanQiao Baseboard development’s log 01LED、LCD and Key quick startLED - LED Display and FloatingThe Pins to LED is show as followed.Pins Due to The pin from PC8 to PC15 is used by both LED and LCD so t">
<meta property="og:type" content="article">
<meta property="og:title" content="LanQiao Baseboard Development&#39;s log01">
<meta property="og:url" content="https://locklve.github.io/2024/11/18/LanQiao_Baseboard_01/LED&LCD&Key-development/index.html">
<meta property="og:site_name" content="LuvRene&#39;s Blog">
<meta property="og:description" content="LanQiao Baseboard development’s log 01LED、LCD and Key quick startLED - LED Display and FloatingThe Pins to LED is show as followed.Pins Due to The pin from PC8 to PC15 is used by both LED and LCD so t">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://locklve.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2024-11-17T16:00:00.000Z">
<meta property="article:modified_time" content="2024-11-20T11:26:41.416Z">
<meta property="article:author" content="LuvRene">
<meta property="article:tag" content="LanQiao">
<meta property="article:tag" content="STM32">
<meta property="article:tag" content="GPIO">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://locklve.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/butterfly-icon.png"><link rel="canonical" href="https://locklve.github.io/2024/11/18/LanQiao_Baseboard_01/LED&amp;LCD&amp;Key-development/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: '[object Object]',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'LanQiao Baseboard Development\'s log01',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/rene.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/rene.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/butterfly-icon.png" alt="Logo"><span class="site-name">LuvRene's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">LanQiao Baseboard Development's log01</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">LanQiao Baseboard Development's log01</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-11-17T16:00:00.000Z" title="Created 2024-11-18 00:00:00">2024-11-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-11-20T11:26:41.416Z" title="Updated 2024-11-20 19:26:41">2024-11-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/">嵌入式开发</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated. Please pay attention to its prompt accuracy.&quot;,&quot;postUpdate&quot;:&quot;2024-11-20 19:26:41&quot;}" hidden></div><h1 id="LanQiao-Baseboard-development’s-log-01"><a href="#LanQiao-Baseboard-development’s-log-01" class="headerlink" title="LanQiao Baseboard development’s log 01"></a>LanQiao Baseboard development’s log 01</h1><h2 id="LED、LCD-and-Key-quick-start"><a href="#LED、LCD-and-Key-quick-start" class="headerlink" title="LED、LCD and Key quick start"></a>LED、LCD and Key quick start</h2><h3 id="LED-LED-Display-and-Floating"><a href="#LED-LED-Display-and-Floating" class="headerlink" title="LED - LED Display and Floating"></a>LED - LED Display and Floating</h3><p><strong><em>The Pins to LED is show as followed.</em></strong><br><a href="/img/pin.png">Pins</a></p>
<p><strong><em>Due to The pin from PC8 to PC15 is used by both LED and LCD so there is D1 between pins and LEDs so that when PD2 is set to High, the value of pins can be also set to LED. Instead, if the PD2 is set to low, the value of pins only affect the LCD’s value.<br>So now we define the display function so that we can easily write the value of LED.</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> unsigned char uint8_t</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">LED_Disp</span><span class="params">(<span class="type">uint8_t</span> disLED)</span></span><br><span class="line">&#123;</span><br><span class="line">  HAL_GPIO_WritePin(GPIOC, GPIO_PIN_All, GPIO_PIN_SET);   <span class="comment">// Turn off all the led</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOC, disLED&lt;&lt;<span class="number">8</span>, GPIO_PIN_RESET);    <span class="comment">// Choose led(low 8th switch to high 8th) and turn on</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOD, GPIO_PIN_2, GPIO_PIN_SET);     <span class="comment">// Set PD2 to high to enable D1(Lock)</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOD, GPIO_PIN_2, GPIO_PIN_RESET);   <span class="comment">// ...........low to disable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>The main concept is:</em></strong><br><em><strong>First, Set the values of all pin which control the LED. Then set the PD2 to <span style="color:red; font-size:20px">High</span>. After that, lock down the value so that you can easily operate the LCD rather influence the LED.</strong></em></p>
<p><strong><em>Now, you can use the display function to create a floating mode.</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LED_Float</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 0000 0001 -&gt; 0000 0010 ...etc. If i = 1000 0000 Display the last time and exit.</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">0xf0</span>; i = i&lt;&lt;<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    LED_Disp(i);</span><br><span class="line">    HAL_Delay(<span class="number">100</span>);</span><br><span class="line">    LED_Disp(<span class="number">0x00</span>);     <span class="comment">// Clear the last LED</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>Floating, which means that the eight LED turn on and off one by one to make it looks like floating, requires controlling the LED’s sequence. You can write like:</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HAL_GPIO_WritePin(GPIOC, GPIO_PIN_x, GPIO_PIN_SET);</span><br></pre></td></tr></table></figure>
<p><strong><em>and control its time sequence by yourselves but your code will become long and ugly. So this blog use the bit shift combine with loop. As you can see, the GPIO_Port such as GPIOC contains 16 pins, from PC0 to PC15.</em></strong></p>
<p><strong><em>And the number we can display in binary system:</em></strong></p>
<table>
<thead>
<tr>
<th>Col1</th>
<th>Col2</th>
</tr>
</thead>
<tbody><tr>
<td><strong><em>GPIO_PIN_0</em></strong></td>
<td><strong><em>GPIO_PIN_15</em></strong></td>
</tr>
<tr>
<td>0000 0000 0000 0001</td>
<td>1000 0000 0000 0000</td>
</tr>
</tbody></table>
<p><strong><em>In this way, I believe you can easily get to know why we can shift the bit(left side) to make each LED turn on. The PC0 refers to 0x01 and the PC15 refers to 0xf0. Everytime we want to turn the LED0~7 on, we only need to set the bits value that in the low eight position because we carry it to high eight position in our display function.</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HAL_GPIO_WritePin(GPIOC, disLED&lt;&lt;<span class="number">8</span>, GPIO_PIN_RESET);    <span class="comment">// Choose led(low 8th switch to high 8th) and turn on</span></span><br></pre></td></tr></table></figure>

<p><strong><em>Then you can adjust the time of turning on to reach the final result you want. You can use the basic display function and the concept to generate your own display mode.</em></strong></p>
<h3 id="LCD-Display-and-show-Info"><a href="#LCD-Display-and-show-Info" class="headerlink" title="LCD - Display and show Info"></a>LCD - Display and show Info</h3><p><strong><em>The LCD original code is complex and difficult but it is lucky that we have the driver lib so all we need to do is transport it and use it.</em></strong></p>
<p><strong><em>In this blog we will support you with the driver lib file code and some most-use function with using tips.</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br></pre></td><td class="code"><pre><span class="line">/-----Driver Lib-----/</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;LCD.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Fonts.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span>  vu16 TextColor = <span class="number">0x0000</span>, BackColor = <span class="number">0xFFFF</span>;</span><br><span class="line">vu16 dummy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : Delay_LCD</span></span><br><span class="line"><span class="comment">* Description    : Inserts a delay time.</span></span><br><span class="line"><span class="comment">* Input          : nCount: specifies the delay time length.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay_LCD</span><span class="params">(u16 n)</span></span><br><span class="line">&#123;</span><br><span class="line">    u16 i, j;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">3000</span>; ++j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	uC8230��Һ���������Ĵ�������</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">REG_8230_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0000</span>, <span class="number">0x0001</span>);</span><br><span class="line">    Delay_LCD(<span class="number">1000</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0001</span>, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0010</span>, <span class="number">0x1790</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0060</span>, <span class="number">0x2700</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0061</span>, <span class="number">0x0001</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0046</span>, <span class="number">0x0002</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0013</span>, <span class="number">0x8010</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0012</span>, <span class="number">0x80fe</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0002</span>, <span class="number">0x0500</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0003</span>, <span class="number">0x1030</span>);</span><br><span class="line"></span><br><span class="line">    LCD_WriteReg(<span class="number">0x0030</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0031</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0032</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0033</span>, <span class="number">0x0300</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0034</span>, <span class="number">0x0003</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0035</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0036</span>, <span class="number">0x0014</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0037</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0038</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0039</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x003a</span>, <span class="number">0x0300</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x003b</span>, <span class="number">0x0003</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x003c</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x003d</span>, <span class="number">0x1400</span>);</span><br><span class="line"></span><br><span class="line">    LCD_WriteReg(<span class="number">0x0092</span>, <span class="number">0x0200</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0093</span>, <span class="number">0x0303</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0090</span>, <span class="number">0x080d</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0003</span>, <span class="number">0x1018</span>);</span><br><span class="line">    LCD_WriteReg(<span class="number">0x0007</span>, <span class="number">0x0173</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">REG_932X_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_WriteReg(R227, <span class="number">0x3008</span>);   <span class="comment">// Set internal timing</span></span><br><span class="line">    LCD_WriteReg(R231, <span class="number">0x0012</span>); <span class="comment">// Set internal timing</span></span><br><span class="line">    LCD_WriteReg(R239, <span class="number">0x1231</span>);   <span class="comment">// Set internal timing</span></span><br><span class="line">    LCD_WriteReg(R1, <span class="number">0x0000</span>);   <span class="comment">// set SS and SM bit		  //0x0100</span></span><br><span class="line">    LCD_WriteReg(R2, <span class="number">0x0700</span>);   <span class="comment">// set 1 line inversion</span></span><br><span class="line">    LCD_WriteReg(R3, <span class="number">0x1030</span>);     <span class="comment">// set GRAM write direction and BGR=1.</span></span><br><span class="line">    LCD_WriteReg(R4, <span class="number">0x0000</span>);     <span class="comment">// Resize register</span></span><br><span class="line">    LCD_WriteReg(R8, <span class="number">0x0207</span>);     <span class="comment">// set the back porch and front porch</span></span><br><span class="line">    LCD_WriteReg(R9, <span class="number">0x0000</span>);     <span class="comment">// set non-display area refresh cycle ISC[3:0]</span></span><br><span class="line">    LCD_WriteReg(R10, <span class="number">0x0000</span>);    <span class="comment">// FMARK function</span></span><br><span class="line">    LCD_WriteReg(R12, <span class="number">0x0000</span>);  <span class="comment">// RGB interface setting</span></span><br><span class="line">    LCD_WriteReg(R13, <span class="number">0x0000</span>);    <span class="comment">// Frame marker Position</span></span><br><span class="line">    LCD_WriteReg(R15, <span class="number">0x0000</span>);  <span class="comment">// RGB interface polarity</span></span><br><span class="line">    <span class="comment">/**************Power On sequence ****************/</span></span><br><span class="line">    LCD_WriteReg(R16, <span class="number">0x0000</span>);    <span class="comment">// SAP, BT[3:0], AP, DSTB, SLP, STB</span></span><br><span class="line">    LCD_WriteReg(R17, <span class="number">0x0007</span>);    <span class="comment">// DC1[2:0], DC0[2:0], VC[2:0]</span></span><br><span class="line">    LCD_WriteReg(R18, <span class="number">0x0000</span>);  <span class="comment">// VREG1OUT voltage</span></span><br><span class="line">    LCD_WriteReg(R19, <span class="number">0x0000</span>);    <span class="comment">// VDV[4:0] for VCOM amplitude</span></span><br><span class="line">    <span class="comment">//	Delay_Ms(200);                    // Delay 200 MS , Dis-charge capacitor power voltage</span></span><br><span class="line">    HAL_Delay(<span class="number">200</span>);</span><br><span class="line">    LCD_WriteReg(R16, <span class="number">0x1690</span>);    <span class="comment">// SAP, BT[3:0], AP, DSTB, SLP, STB</span></span><br><span class="line">    LCD_WriteReg(R17, <span class="number">0x0227</span>);  <span class="comment">// R11H=0x0221 at VCI=3.3V, DC1[2:0], DC0[2:0], VC[2:0]</span></span><br><span class="line">    <span class="comment">//	Delay_Ms(50);      // Delay 50ms</span></span><br><span class="line">    HAL_Delay(<span class="number">50</span>);</span><br><span class="line">    LCD_WriteReg(R18, <span class="number">0x001D</span>);  <span class="comment">// External reference voltage= Vci;</span></span><br><span class="line">    <span class="comment">//	Delay_Ms(50);      // Delay 50ms</span></span><br><span class="line">    HAL_Delay(<span class="number">50</span>);</span><br><span class="line">    LCD_WriteReg(R19, <span class="number">0x0800</span>);  <span class="comment">// R13H=1D00 when R12H=009D;VDV[4:0] for VCOM amplitude</span></span><br><span class="line">    LCD_WriteReg(R41, <span class="number">0x0014</span>);  <span class="comment">// R29H=0013 when R12H=009D;VCM[5:0] for VCOMH</span></span><br><span class="line">    LCD_WriteReg(R43, <span class="number">0x000B</span>);    <span class="comment">// Frame Rate = 96Hz</span></span><br><span class="line">    <span class="comment">//	Delay_Ms(50);      // Delay 50ms</span></span><br><span class="line">    HAL_Delay(<span class="number">50</span>);</span><br><span class="line">    LCD_WriteReg(R32, <span class="number">0x0000</span>);  <span class="comment">// GRAM horizontal Address</span></span><br><span class="line">    LCD_WriteReg(R33, <span class="number">0x0000</span>);  <span class="comment">// GRAM Vertical Address</span></span><br><span class="line">    <span class="comment">/* ----------- Adjust the Gamma Curve ---------- */</span></span><br><span class="line">    LCD_WriteReg(R48, <span class="number">0x0007</span>);</span><br><span class="line">    LCD_WriteReg(R49, <span class="number">0x0707</span>);</span><br><span class="line">    LCD_WriteReg(R50, <span class="number">0x0006</span>);</span><br><span class="line">    LCD_WriteReg(R53, <span class="number">0x0704</span>);</span><br><span class="line">    LCD_WriteReg(R54, <span class="number">0x1F04</span>);</span><br><span class="line">    LCD_WriteReg(R55, <span class="number">0x0004</span>);</span><br><span class="line">    LCD_WriteReg(R56, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R57, <span class="number">0x0706</span>);</span><br><span class="line">    LCD_WriteReg(R60, <span class="number">0x0701</span>);</span><br><span class="line">    LCD_WriteReg(R61, <span class="number">0x000F</span>);</span><br><span class="line">    <span class="comment">/* ------------------ Set GRAM area --------------- */</span></span><br><span class="line">    LCD_WriteReg(R80, <span class="number">0x0000</span>);    <span class="comment">// Horizontal GRAM Start Address</span></span><br><span class="line">    LCD_WriteReg(R81, <span class="number">0x00EF</span>);    <span class="comment">// Horizontal GRAM End Address</span></span><br><span class="line">    LCD_WriteReg(R82, <span class="number">0x0000</span>);  <span class="comment">// Vertical GRAM Start Address</span></span><br><span class="line">    LCD_WriteReg(R83, <span class="number">0x013F</span>);  <span class="comment">// Vertical GRAM Start Address</span></span><br><span class="line">    LCD_WriteReg(R96, <span class="number">0x2700</span>);  <span class="comment">// Gate Scan Line		  0xA700</span></span><br><span class="line">    LCD_WriteReg(R97, <span class="number">0x0001</span>);  <span class="comment">// NDL,VLE, REV</span></span><br><span class="line">    LCD_WriteReg(R106, <span class="number">0x0000</span>); <span class="comment">// set scrolling line</span></span><br><span class="line">    <span class="comment">/* -------------- Partial Display Control --------- */</span></span><br><span class="line">    LCD_WriteReg(R128, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R129, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R130, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R131, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R132, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R133, <span class="number">0x0000</span>);</span><br><span class="line">    <span class="comment">/* -------------- Panel Control ------------------- */</span></span><br><span class="line">    LCD_WriteReg(R144, <span class="number">0x0010</span>);</span><br><span class="line">    LCD_WriteReg(R146, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R147, <span class="number">0x0003</span>);</span><br><span class="line">    LCD_WriteReg(R149, <span class="number">0x0110</span>);</span><br><span class="line">    LCD_WriteReg(R151, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R152, <span class="number">0x0000</span>);</span><br><span class="line">    <span class="comment">/* Set GRAM write direction and BGR = 1 */</span></span><br><span class="line">    <span class="comment">/* I/D=01 (Horizontal : increment, Vertical : decrement) */</span></span><br><span class="line">    <span class="comment">/* AM=1 (address is updated in vertical writing direction) */</span></span><br><span class="line">    LCD_WriteReg(R3, <span class="number">0x01018</span>);    <span class="comment">//0x1018</span></span><br><span class="line"></span><br><span class="line">    LCD_WriteReg(R7, <span class="number">0x0173</span>);   <span class="comment">// 262K color and display ON</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : STM3210B_LCD_Init</span></span><br><span class="line"><span class="comment">* Description    : Initializes the LCD.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_CtrlLinesConfig();</span><br><span class="line">    dummy = LCD_ReadReg(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(dummy == <span class="number">0x8230</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        REG_8230_Init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        REG_932X_Init();</span><br><span class="line">    &#125;</span><br><span class="line">    dummy = LCD_ReadReg(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_SetTextColor</span></span><br><span class="line"><span class="comment">* Description    : Sets the Text color.</span></span><br><span class="line"><span class="comment">* Input          : - Color: specifies the Text color code RGB(5-6-5).</span></span><br><span class="line"><span class="comment">* Output         : - TextColor: Text color global variable used by LCD_DrawChar</span></span><br><span class="line"><span class="comment">*                  and LCD_DrawPicture functions.</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_SetTextColor</span><span class="params">(vu16 Color)</span></span><br><span class="line">&#123;</span><br><span class="line">    TextColor = Color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_SetBackColor</span></span><br><span class="line"><span class="comment">* Description    : Sets the Background color.</span></span><br><span class="line"><span class="comment">* Input          : - Color: specifies the Background color code RGB(5-6-5).</span></span><br><span class="line"><span class="comment">* Output         : - BackColor: Background color global variable used by</span></span><br><span class="line"><span class="comment">*                  LCD_DrawChar and LCD_DrawPicture functions.</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_SetBackColor</span><span class="params">(vu16 Color)</span></span><br><span class="line">&#123;</span><br><span class="line">    BackColor = Color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_ClearLine</span></span><br><span class="line"><span class="comment">* Description    : Clears the selected line.</span></span><br><span class="line"><span class="comment">* Input          : - Line: the Line to be cleared.</span></span><br><span class="line"><span class="comment">*                    This parameter can be one of the following values:</span></span><br><span class="line"><span class="comment">*                       - Linex: where x can be 0..9</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_ClearLine</span><span class="params">(u8 Line)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_DisplayStringLine(Line, <span class="string">&quot;                    &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_Clear</span></span><br><span class="line"><span class="comment">* Description    : Clears the hole LCD.</span></span><br><span class="line"><span class="comment">* Input          : Color: the color of the background.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_Clear</span><span class="params">(u16 Color)</span></span><br><span class="line">&#123;</span><br><span class="line">    u32 index = <span class="number">0</span>;</span><br><span class="line">    LCD_SetCursor(<span class="number">0x00</span>, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; <span class="number">76800</span>; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteRAM(Color);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_SetCursor</span></span><br><span class="line"><span class="comment">* Description    : Sets the cursor position.</span></span><br><span class="line"><span class="comment">* Input          : - Xpos: specifies the X position.</span></span><br><span class="line"><span class="comment">*                  - Ypos: specifies the Y position.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_SetCursor</span><span class="params">(u8 Xpos, u16 Ypos)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_WriteReg(R32, Xpos);</span><br><span class="line">    LCD_WriteReg(R33, Ypos);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DrawChar</span></span><br><span class="line"><span class="comment">* Description    : Draws a character on LCD.</span></span><br><span class="line"><span class="comment">* Input          : - Xpos: the Line where to display the character shape.</span></span><br><span class="line"><span class="comment">*                    This parameter can be one of the following values:</span></span><br><span class="line"><span class="comment">*                       - Linex: where x can be 0..9</span></span><br><span class="line"><span class="comment">*                  - Ypos: start column address.</span></span><br><span class="line"><span class="comment">*                  - c: pointer to the character data.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DrawChar</span><span class="params">(u8 Xpos, u16 Ypos, uc16 *c)</span></span><br><span class="line">&#123;</span><br><span class="line">    u32 index = <span class="number">0</span>, i = <span class="number">0</span>;</span><br><span class="line">    u8 Xaddress = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    Xaddress = Xpos;</span><br><span class="line">    LCD_SetCursor(Xaddress, Ypos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; <span class="number">24</span>; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((c[index] &amp; (<span class="number">1</span> &lt;&lt; i)) == <span class="number">0x00</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                LCD_WriteRAM(BackColor);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                LCD_WriteRAM(TextColor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Xaddress++;</span><br><span class="line">        LCD_SetCursor(Xaddress, Ypos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DisplayChar</span></span><br><span class="line"><span class="comment">* Description    : Displays one character (16dots width, 24dots height).</span></span><br><span class="line"><span class="comment">* Input          : - Line: the Line where to display the character shape .</span></span><br><span class="line"><span class="comment">*                    This parameter can be one of the following values:</span></span><br><span class="line"><span class="comment">*                       - Linex: where x can be 0..9</span></span><br><span class="line"><span class="comment">*                  - Column: start column address.</span></span><br><span class="line"><span class="comment">*                  - Ascii: character ascii code, must be between 0x20 and 0x7E.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DisplayChar</span><span class="params">(u8 Line, u16 Column, u8 Ascii)</span></span><br><span class="line">&#123;</span><br><span class="line">    Ascii -= <span class="number">32</span>;</span><br><span class="line">    LCD_DrawChar(Line, Column, &amp;ASCII_Table[Ascii * <span class="number">24</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DisplayStringLine</span></span><br><span class="line"><span class="comment">* Description    : Displays a maximum of 20 char on the LCD.</span></span><br><span class="line"><span class="comment">* Input          : - Line: the Line where to display the character shape .</span></span><br><span class="line"><span class="comment">*                    This parameter can be one of the following values:</span></span><br><span class="line"><span class="comment">*                       - Linex: where x can be 0..9</span></span><br><span class="line"><span class="comment">*                  - *ptr: pointer to string to display on LCD.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DisplayStringLine</span><span class="params">(u8 Line, u8 *ptr)</span></span><br><span class="line">&#123;</span><br><span class="line">    u32 i = <span class="number">0</span>;</span><br><span class="line">    u16 refcolumn = <span class="number">319</span>;<span class="comment">//319;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ((*ptr != <span class="number">0</span>) &amp;&amp; (i &lt; <span class="number">20</span>))	 <span class="comment">//	20</span></span><br><span class="line">    &#123;</span><br><span class="line">        LCD_DisplayChar(Line, refcolumn, *ptr);</span><br><span class="line">        refcolumn -= <span class="number">16</span>;</span><br><span class="line">        ptr++;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_SetDisplayWindow</span></span><br><span class="line"><span class="comment">* Description    : Sets a display window</span></span><br><span class="line"><span class="comment">* Input          : - Xpos: specifies the X buttom left position.</span></span><br><span class="line"><span class="comment">*                  - Ypos: specifies the Y buttom left position.</span></span><br><span class="line"><span class="comment">*                  - Height: display window height.</span></span><br><span class="line"><span class="comment">*                  - Width: display window width.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_SetDisplayWindow</span><span class="params">(u8 Xpos, u16 Ypos, u8 Height, u16 Width)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(Xpos &gt;= Height)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteReg(R80, (Xpos - Height + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteReg(R80, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    LCD_WriteReg(R81, Xpos);</span><br><span class="line">    <span class="keyword">if</span>(Ypos &gt;= Width)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteReg(R82, (Ypos - Width + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteReg(R82, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* Vertical GRAM End Address */</span></span><br><span class="line">    LCD_WriteReg(R83, Ypos);</span><br><span class="line">    LCD_SetCursor(Xpos, Ypos);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_WindowModeDisable</span></span><br><span class="line"><span class="comment">* Description    : Disables LCD Window mode.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_WindowModeDisable</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_SetDisplayWindow(<span class="number">239</span>, <span class="number">0x13F</span>, <span class="number">240</span>, <span class="number">320</span>);</span><br><span class="line">    LCD_WriteReg(R3, <span class="number">0x1018</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DrawLine</span></span><br><span class="line"><span class="comment">* Description    : Displays a line.</span></span><br><span class="line"><span class="comment">* Input          : - Xpos: specifies the X position.</span></span><br><span class="line"><span class="comment">*                  - Ypos: specifies the Y position.</span></span><br><span class="line"><span class="comment">*                  - Length: line length.</span></span><br><span class="line"><span class="comment">*                  - Direction: line direction.</span></span><br><span class="line"><span class="comment">*                    This parameter can be one of the following values: Vertical</span></span><br><span class="line"><span class="comment">*                    or Horizontal.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DrawLine</span><span class="params">(u8 Xpos, u16 Ypos, u16 Length, u8 Direction)</span></span><br><span class="line">&#123;</span><br><span class="line">    u32 i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    LCD_SetCursor(Xpos, Ypos);</span><br><span class="line">    <span class="keyword">if</span>(Direction == Horizontal)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            LCD_WriteRAM(TextColor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">            LCD_WriteRAM(TextColor);</span><br><span class="line">            Xpos++;</span><br><span class="line">            LCD_SetCursor(Xpos, Ypos);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DrawRect</span></span><br><span class="line"><span class="comment">* Description    : Displays a rectangle.</span></span><br><span class="line"><span class="comment">* Input          : - Xpos: specifies the X position.</span></span><br><span class="line"><span class="comment">*                  - Ypos: specifies the Y position.</span></span><br><span class="line"><span class="comment">*                  - Height: display rectangle height.</span></span><br><span class="line"><span class="comment">*                  - Width: display rectangle width.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DrawRect</span><span class="params">(u8 Xpos, u16 Ypos, u8 Height, u16 Width)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_DrawLine(Xpos, Ypos, Width, Horizontal);</span><br><span class="line">    LCD_DrawLine((Xpos + Height), Ypos, Width, Horizontal);</span><br><span class="line"></span><br><span class="line">    LCD_DrawLine(Xpos, Ypos, Height, Vertical);</span><br><span class="line">    LCD_DrawLine(Xpos, (Ypos - Width + <span class="number">1</span>), Height, Vertical);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DrawCircle</span></span><br><span class="line"><span class="comment">* Description    : Displays a circle.</span></span><br><span class="line"><span class="comment">* Input          : - Xpos: specifies the X position.</span></span><br><span class="line"><span class="comment">*                  - Ypos: specifies the Y position.</span></span><br><span class="line"><span class="comment">*                  - Height: display rectangle height.</span></span><br><span class="line"><span class="comment">*                  - Width: display rectangle width.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DrawCircle</span><span class="params">(u8 Xpos, u16 Ypos, u16 Radius)</span></span><br><span class="line">&#123;</span><br><span class="line">    s32  D;</span><br><span class="line">    u32  CurX;</span><br><span class="line">    u32  CurY;</span><br><span class="line"></span><br><span class="line">    D = <span class="number">3</span> - (Radius &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    CurX = <span class="number">0</span>;</span><br><span class="line">    CurY = Radius;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (CurX &lt;= CurY)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_SetCursor(Xpos + CurX, Ypos + CurY);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos + CurX, Ypos - CurY);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos - CurX, Ypos + CurY);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos - CurX, Ypos - CurY);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos + CurY, Ypos + CurX);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos + CurY, Ypos - CurX);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos - CurY, Ypos + CurX);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        LCD_SetCursor(Xpos - CurY, Ypos - CurX);</span><br><span class="line">        LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">        LCD_WriteRAM(TextColor);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (D &lt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            D += (CurX &lt;&lt; <span class="number">2</span>) + <span class="number">6</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            D += ((CurX - CurY) &lt;&lt; <span class="number">2</span>) + <span class="number">10</span>;</span><br><span class="line">            CurY--;</span><br><span class="line">        &#125;</span><br><span class="line">        CurX++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DrawMonoPict</span></span><br><span class="line"><span class="comment">* Description    : Displays a monocolor picture.</span></span><br><span class="line"><span class="comment">* Input          : - Pict: pointer to the picture array.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DrawMonoPict</span><span class="params">(uc32 *Pict)</span></span><br><span class="line">&#123;</span><br><span class="line">    u32 index = <span class="number">0</span>, i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    LCD_SetCursor(<span class="number">0</span>, <span class="number">319</span>);</span><br><span class="line"></span><br><span class="line">    LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; <span class="number">2400</span>; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((Pict[index] &amp; (<span class="number">1</span> &lt;&lt; i)) == <span class="number">0x00</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                LCD_WriteRAM(BackColor);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                LCD_WriteRAM(TextColor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_WriteBMP</span></span><br><span class="line"><span class="comment">* Description    : Displays a bitmap picture loaded in the internal Flash.</span></span><br><span class="line"><span class="comment">* Input          : - BmpAddress: Bmp picture address in the internal Flash.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_WriteBMP</span><span class="params">(u32 BmpAddress)</span></span><br><span class="line">&#123;</span><br><span class="line">    u32 index = <span class="number">0</span>, size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    size = *(vu16 *) (BmpAddress + <span class="number">2</span>);</span><br><span class="line">    size |= (*(vu16 *) (BmpAddress + <span class="number">4</span>)) &lt;&lt; <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    index = *(vu16 *) (BmpAddress + <span class="number">10</span>);</span><br><span class="line">    index |= (*(vu16 *) (BmpAddress + <span class="number">12</span>)) &lt;&lt; <span class="number">16</span>;</span><br><span class="line">    size = (size - index) / <span class="number">2</span>;</span><br><span class="line">    BmpAddress += index;</span><br><span class="line"></span><br><span class="line">    LCD_WriteReg(R3, <span class="number">0x1008</span>);</span><br><span class="line">    LCD_WriteRAM_Prepare();</span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteRAM(*(vu16 *)BmpAddress);</span><br><span class="line">        BmpAddress += <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LCD_WriteReg(R3, <span class="number">0x1018</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_WriteReg</span></span><br><span class="line"><span class="comment">* Description    : Writes to the selected LCD register.</span></span><br><span class="line"><span class="comment">* Input          : - LCD_Reg: address of the selected register.</span></span><br><span class="line"><span class="comment">*                  - LCD_RegValue: value to write to the selected register.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_WriteReg</span><span class="params">(u8 LCD_Reg, u16 LCD_RegValue)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIOB-&gt;BRR  |= GPIO_PIN_9;</span><br><span class="line">    GPIOB-&gt;BRR  |= GPIO_PIN_8;</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_5;</span><br><span class="line"></span><br><span class="line">    GPIOC-&gt;ODR = LCD_Reg;</span><br><span class="line">    GPIOB-&gt;BRR  |= GPIO_PIN_5;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_5;</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_8;</span><br><span class="line"></span><br><span class="line">    GPIOC-&gt;ODR = LCD_RegValue;</span><br><span class="line">    GPIOB-&gt;BRR  |= GPIO_PIN_5;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_5;</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_8;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_ReadReg</span></span><br><span class="line"><span class="comment">* Description    : Reads the selected LCD Register.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : LCD Register Value.</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line">u16 <span class="title function_">LCD_ReadReg</span><span class="params">(u8 LCD_Reg)</span></span><br><span class="line">&#123;</span><br><span class="line">    u16 temp;</span><br><span class="line"></span><br><span class="line">    GPIOB-&gt;BRR |= GPIO_PIN_9;</span><br><span class="line">    GPIOB-&gt;BRR |= GPIO_PIN_8;</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_5;</span><br><span class="line"></span><br><span class="line">    GPIOC-&gt;ODR = LCD_Reg;</span><br><span class="line">    GPIOB-&gt;BRR |= GPIO_PIN_5;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_5;</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_8;</span><br><span class="line"></span><br><span class="line">    LCD_BusIn();</span><br><span class="line">    GPIOA-&gt;BRR |= GPIO_PIN_8;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    temp = GPIOC-&gt;IDR;</span><br><span class="line">    GPIOA-&gt;BSRR |= GPIO_PIN_8;</span><br><span class="line"></span><br><span class="line">    LCD_BusOut();</span><br><span class="line">    GPIOB-&gt;BSRR |= GPIO_PIN_9;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_WriteRAM_Prepare</span></span><br><span class="line"><span class="comment">* Description    : Prepare to write to the LCD RAM.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_WriteRAM_Prepare</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_9;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_8;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_5;</span><br><span class="line"></span><br><span class="line">    GPIOC-&gt;ODR = R34;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_5;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_5;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_8;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_9;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_WriteRAM</span></span><br><span class="line"><span class="comment">* Description    : Writes to the LCD RAM.</span></span><br><span class="line"><span class="comment">* Input          : - RGB_Code: the pixel color in RGB mode (5-6-5).</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_WriteRAM</span><span class="params">(u16 RGB_Code)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_9;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_8;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_5;</span><br><span class="line"></span><br><span class="line">    GPIOC-&gt;ODR = RGB_Code;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_5;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_5;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_8;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_9;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_ReadRAM</span></span><br><span class="line"><span class="comment">* Description    : Reads the LCD RAM.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : LCD RAM Value.</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line">u16 <span class="title function_">LCD_ReadRAM</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    u16 temp;</span><br><span class="line"></span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_9;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_8;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_5;</span><br><span class="line"></span><br><span class="line">    GPIOC-&gt;ODR = R34;</span><br><span class="line">    GPIOB-&gt;BRR  |=  GPIO_PIN_5;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_5;</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_8;</span><br><span class="line"></span><br><span class="line">    LCD_BusIn();</span><br><span class="line">    GPIOA-&gt;BRR |=  GPIO_PIN_8;</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    __nop();</span><br><span class="line">    temp = GPIOC-&gt;IDR;</span><br><span class="line">    GPIOA-&gt;BSRR |=  GPIO_PIN_8;</span><br><span class="line"></span><br><span class="line">    LCD_BusOut();</span><br><span class="line">    GPIOB-&gt;BSRR |=  GPIO_PIN_9;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_PowerOn</span></span><br><span class="line"><span class="comment">* Description    : Power on the LCD.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_PowerOn</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_WriteReg(R16, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R17, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R18, <span class="number">0x0000</span>);</span><br><span class="line">    LCD_WriteReg(R19, <span class="number">0x0000</span>);</span><br><span class="line">    Delay_LCD(<span class="number">20</span>);</span><br><span class="line">    LCD_WriteReg(R16, <span class="number">0x17B0</span>);</span><br><span class="line">    LCD_WriteReg(R17, <span class="number">0x0137</span>);</span><br><span class="line">    Delay_LCD(<span class="number">5</span>);</span><br><span class="line">    LCD_WriteReg(R18, <span class="number">0x0139</span>);</span><br><span class="line">    Delay_LCD(<span class="number">5</span>);</span><br><span class="line">    LCD_WriteReg(R19, <span class="number">0x1d00</span>);</span><br><span class="line">    LCD_WriteReg(R41, <span class="number">0x0013</span>);</span><br><span class="line">    Delay_LCD(<span class="number">5</span>);</span><br><span class="line">    LCD_WriteReg(R7, <span class="number">0x0173</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DisplayOn</span></span><br><span class="line"><span class="comment">* Description    : Enables the Display.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DisplayOn</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_WriteReg(R7, <span class="number">0x0173</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DisplayOff</span></span><br><span class="line"><span class="comment">* Description    : Disables the Display.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DisplayOff</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    LCD_WriteReg(R7, <span class="number">0x0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_CtrlLinesConfig</span></span><br><span class="line"><span class="comment">* Description    : Configures LCD Control lines.</span></span><br><span class="line"><span class="comment">                   Push-Pull mode.</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_CtrlLinesConfig</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    __HAL_RCC_GPIOC_CLK_ENABLE();</span><br><span class="line">    __HAL_RCC_GPIOA_CLK_ENABLE();</span><br><span class="line">    __HAL_RCC_GPIOB_CLK_ENABLE();</span><br><span class="line"></span><br><span class="line">    GPIO_InitStruct.Pin = GPIO_PIN_5 | GPIO_PIN_8 | GPIO_PIN_9;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    HAL_GPIO_Init(GPIOB, &amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line">    GPIO_InitStruct.Pin =  GPIO_PIN_8 ;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line">    LCD_BusOut();</span><br><span class="line"></span><br><span class="line">    GPIOA-&gt;BSRR |= <span class="number">0x0100</span>;</span><br><span class="line">    GPIOB-&gt;BSRR |= <span class="number">0x0220</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_BusIn</span></span><br><span class="line"><span class="comment">* Description    : Configures the Parallel interface for LCD(PortC)</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_BusIn</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    GPIO_InitStruct.Pin = GPIO_PIN_All;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_INPUT;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_BusOut</span></span><br><span class="line"><span class="comment">* Description    : Configures the Parallel interface for LCD(PortC)</span></span><br><span class="line"><span class="comment">* Input          : None</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_BusOut</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    GPIO_InitStruct.Pin = GPIO_PIN_All;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* Function Name  : LCD_DrawPicture</span></span><br><span class="line"><span class="comment">* Description    : Displays a 16 color picture.</span></span><br><span class="line"><span class="comment">* Input          : - picture: pointer to the picture array.</span></span><br><span class="line"><span class="comment">* Output         : None</span></span><br><span class="line"><span class="comment">* Return         : None</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_DrawPicture</span><span class="params">(<span class="type">const</span> u8 *picture)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> index;</span><br><span class="line">    LCD_SetCursor(<span class="number">0x00</span>, <span class="number">0x0000</span>);</span><br><span class="line"></span><br><span class="line">    LCD_WriteRAM_Prepare(); <span class="comment">/* Prepare to write GRAM */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; <span class="number">76800</span>; index++)</span><br><span class="line">    &#123;</span><br><span class="line">        LCD_WriteRAM(picture[<span class="number">2</span> * index + <span class="number">1</span>] &lt;&lt; <span class="number">8</span> | picture[<span class="number">2</span> * index]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************User Defined Functions********************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">My_LCD_Init</span><span class="params">(u16 Background_Color, vu16 Text_Color)</span></span><br><span class="line">&#123;</span><br><span class="line">  LCD_Init();</span><br><span class="line">  LCD_Clear(Background_Color);</span><br><span class="line">  LCD_SetBackColor(Background_Color);</span><br><span class="line">  LCD_SetTextColor(Text_Color);</span><br><span class="line">  </span><br><span class="line">  LCD_DisplayStringLine(Line0, (<span class="type">uint8_t</span>*)<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">  HAL_Delay(<span class="number">5000</span>);</span><br><span class="line">  LCD_Clear(Background_Color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong><em>The .h file need you to define by yourselves. And after you add the files’ path and include the .h files, you will be able to use the function and show information, even picture if you like.</em></strong></p>
<p>Tips:</p>
<ul>
<li>The initial background color is white, and we provide a function called <span style="color: red; font-size: 20px">LCD_SetBackColor(vu16 Color)</span> which can set the background of your text to any define color as its default color is white. </li>
<li>However, when you use this function, you may find out that only the space where you show texts will change its background color. And other place is still white. So you need <span style="color: red; font-size: 20px">LCD_Clear(u16 Color)</span> which can clear and set the whole LCD to one background color. So we usually set color and clear with the color as necessary step for init.</li>
<li>After you set the background color, you may want to change the text color for better performance. Then you can write <span style="color: red; font-size: 20px">LCD_SetTextColor(vu16 Color)</span>. So that you finish all the basic init step.</li>
</ul>
<h3 id="Key-Trigger-mode-and-event"><a href="#Key-Trigger-mode-and-event" class="headerlink" title="Key - Trigger mode and event"></a>Key - Trigger mode and event</h3><p><strong><em>One key bottom contains different trigger mode such as single-press, double-press, long-press and so on. So it is important to define how you memorize keys’ states and judge its trigger event. In this blog, we use structure to store info of key, and the relevant define as followed.</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Key</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="type">uint8_t</span> long_press;   <span class="comment">// long press check (count times)</span></span><br><span class="line">  <span class="type">uint8_t</span> judge_sta;    <span class="comment">// whether the key is press when last time enter callback(when the key is press)</span></span><br><span class="line">  <span class="type">bool</span> now_key;         <span class="comment">// the key state when enter TIM callback</span></span><br><span class="line">  <span class="type">bool</span> Ispress;         <span class="comment">// Flag of key is pressed</span></span><br><span class="line">&#125;Key;</span><br></pre></td></tr></table></figure>
<p><strong><em>You need to set a TIM(This blog uses TIM3) and configure its <span style="color: red">Prescaler</span> and <span style="color: red">Period</span> value to make your timer enter interrupt callback function every 10ms(the time between twice key check to eliminate the error caused by key itself) one time.</em></strong></p>
<p><strong><em>And you need to rewrite the Period elapsed callback function, check and judge the key event in the callback function. The concrete code is below.</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">Key keys[<span class="number">4</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;     <span class="comment">// define a list to store 4 keys&#x27; structure</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_PeriodElapsedCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// judge which TIMER finish its period(important especially when you have different TIMER callback)</span></span><br><span class="line">  <span class="keyword">if</span> (htim-&gt;Instance == TIM3)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// every 10ms(Timer CallBack time) check key state and update the value of now_key</span></span><br><span class="line">    keys[<span class="number">0</span>].now_key = HAL_GPIO_ReadPin(GPIOB, GPIO_PIN_0);</span><br><span class="line">    keys[<span class="number">1</span>].now_key = HAL_GPIO_ReadPin(GPIOB, GPIO_PIN_1);</span><br><span class="line">    keys[<span class="number">2</span>].now_key = HAL_GPIO_ReadPin(GPIOB, GPIO_PIN_2);</span><br><span class="line">    keys[<span class="number">3</span>].now_key = HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_0);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// for every key judge one time</span></span><br><span class="line">    <span class="comment">// judge 1 times per 10ms (Delay to eliminate the error of key)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">switch</span> (keys[i].judge_sta)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// key wasn&#x27;t press before</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// the first check is pressed.</span></span><br><span class="line">          <span class="keyword">if</span> (keys[i].now_key == <span class="number">0</span>) keys[i].judge_sta = <span class="number">1</span>;  <span class="comment">// this time the key is check press</span></span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// key is checked to be pressed last time</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// the second check is also pressed.</span></span><br><span class="line">          <span class="keyword">if</span> (keys[i].now_key == <span class="number">0</span>) </span><br><span class="line">          &#123;</span><br><span class="line">            keys[i].judge_sta = <span class="number">2</span>;</span><br><span class="line">            keys[i].Ispress = <span class="number">1</span>;      <span class="comment">// The key is truly pressed</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// the second check failed. It is an error and init again.</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">            keys[i].judge_sta = <span class="number">0</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="keyword">if</span> (keys[i].now_key == <span class="number">1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            keys[i].judge_sta = <span class="number">0</span>;  <span class="comment">// leave the key and return judge&#x27;s value. Start next press check.</span></span><br><span class="line">            <span class="comment">// If want a leave check(one press event when leave key)</span></span><br><span class="line">            <span class="comment">// Write: keys[i].Ispress = 1;</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// hold the key</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">// judge is 2 unless leave key. The long press is continue plus(limit to 100 -&gt; 1s).</span></span><br><span class="line">            keys[i].long_press++;</span><br><span class="line">            <span class="keyword">if</span> (keys[i].long_press &gt;= <span class="number">100</span>) keys[i].long_press = <span class="number">100</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>The code contains detailed comments which can help you understand how it works. And you can write more judge function with this concept. And the overall method is every 10ms read the keys’ value which is set to high as default.</em></strong></p>
<p><strong><em>And as judge is 0 at first, all the key will enter the case:0. And then if this time read pin is low which means the key is pressed, it will set judge to 1. When next 10ms enter the callback function, read pins’ state as well, but this time will enter case:1 as judge is set to 1 at the last 10ms.</em></strong></p>
<p><strong><em>If this time read pin is still low(key pressed), set the judge to 2 and Ispress to 1 which indicate that the key is truly pressed. Else, it indicates that it is an error so reset the judge value to 0. The case:2 means only if you leave the key that you can start next event, which avoid continuously triggering if you hold the key. Also I add a long-press check in the case:2.</em></strong></p>
<p><strong><em>If you hold the key, the judge is always 2 and enter case:2 every 10ms. In this way, if you enter the case:2, the long_press add one and if you enter for over 100 times we suppose it is a long press and limit it to 100 which means long press.</em></strong></p>
<p><strong><em>What is more? You can define a clear function to clear the state value after you read the value in main function which is like:</em></strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">clear_keys</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    keys[i].Ispress = <span class="number">0</span>;</span><br><span class="line">    keys[i].judge_sta = <span class="number">0</span>;</span><br><span class="line">    keys[i].long_press = <span class="number">0</span>;</span><br><span class="line">    keys[i].now_key = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>Above is all the content for these three modules. I will start the next study log soon, please wait and see!</em></strong></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://locklve.github.io">LuvRene</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://locklve.github.io/2024/11/18/LanQiao_Baseboard_01/LED&amp;LCD&amp;Key-development/">https://locklve.github.io/2024/11/18/LanQiao_Baseboard_01/LED&amp;LCD&amp;Key-development/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LanQiao/">LanQiao</a><a class="post-meta__tags" href="/tags/STM32/">STM32</a><a class="post-meta__tags" href="/tags/GPIO/">GPIO</a></div><div class="post-share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/11/20/LanQiao_Baseboard_02/PWM-Output/" title="LanQiao Baseboard Development's log02"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">LanQiao Baseboard Development's log02</div></div><div class="info-2"><div class="info-item-1">LanQiao Baseboard development’s log 02PWM Output with Changeable DutyPWM Generate and OutputPWM, simply regarded as square signal, is important in many aspects like motor driven or any thing that can change effect by the level of voltage. So how can we generate a PWM signal?  We can easily generate a PWM signal through our STM32’s TIM modules. The basic configure that you need to change is:  First, Activate the TIM and choose a channel as PWM output channel. Attention! You need to choose CHx...</div></div></div></a><a class="pagination-related" href="/2024/11/13/Quick-start-Markdown/" title="How to quickly start Markdown"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">How to quickly start Markdown</div></div><div class="info-2"><div class="info-item-1">How to quickly start Markdown editionText purpose:This text is written for those who want to use markdown to edit their posts or reports but have no idea about how to start.Or for people knowing the basic operation of markdown but want to edit a beautiful markdown file. Even you can perceive it file as a memo! Operation conclusion Bold and Italics  1Bold -&gt; **Text here** and Italics -&gt; _Text Here_ And the present effects like Bold and Italics. To give more details, you can Nest one...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/11/20/LanQiao_Baseboard_02/PWM-Output/" title="LanQiao Baseboard Development&#39;s log02"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-20</div><div class="info-item-2">LanQiao Baseboard Development&#39;s log02</div></div><div class="info-2"><div class="info-item-1">LanQiao Baseboard development’s log 02PWM Output with Changeable DutyPWM Generate and OutputPWM, simply regarded as square signal, is important in many aspects like motor driven or any thing that can change effect by the level of voltage. So how can we generate a PWM signal?  We can easily generate a PWM signal through our STM32’s TIM modules. The basic configure that you need to change is:  First, Activate the TIM and choose a channel as PWM output channel. Attention! You need to choose CHx...</div></div></div></a><a class="pagination-related" href="/2024/11/21/LanQiao_Baseboard_03/PWM_InputCapture/" title="LanQiao Baseboard Development&#39;s log03"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-21</div><div class="info-item-2">LanQiao Baseboard Development&#39;s log03</div></div><div class="info-2"><div class="info-item-1">LanQiao Baseboard development’s log 03PWM Input Capture Mode for Frequency and Duty CalculationWhat is PWM Input Capture ModePWM input capture mode, is a special mode of TIM, which is especially useful in frequency measure. But you can’t use it occasionally because it needs a PWM input. Its original theory is below.  How Can We Configure the Input Capture ModeYou should start the TIM input capture and rewrite the callback function. The original theory is when Timer detect the rising edge of...</div></div></div></a><a class="pagination-related no-desc" href="/2024/11/22/LanQiao_Baseboard_04/ADC-Single-Conversion/" title="LanQiao Baseboard Development&#39;s log03"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-22</div><div class="info-item-2">LanQiao Baseboard Development&#39;s log03</div></div></div></a><a class="pagination-related" href="/2024/11/25/STM32H723_ADC/STM32H723-ADC/" title="STM32H723-ADC"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-25</div><div class="info-item-2">STM32H723-ADC</div></div><div class="info-2"><div class="info-item-1">STM32H723ZGT6 Development log01 - ADCWhat is ADCThe ADC, analog to digital conversion, is a tool to sample the analog values of voltage and transform to digital data. The range of digital data depends on the accuracy of ADC which can be 12bits, 14bits or even 16bits. The choices above are all provided in STM32H723ZGT6 and I personally recommend to use 14bits which mean $ 0-2^{14} $. Above all, ADC is a tool that can sample the analog values and transform to digital stored in STM32 so that we...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">LuvRene</div><div class="author-info-description">A rookie blogger.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/locklve"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/locklve" target="_blank" title=""><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is LuvRene's Blog. There isn't many blog yet but will append many blog in future. Please wait!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#LanQiao-Baseboard-development%E2%80%99s-log-01"><span class="toc-number">1.</span> <span class="toc-text">LanQiao Baseboard development’s log 01</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#LED%E3%80%81LCD-and-Key-quick-start"><span class="toc-number">1.1.</span> <span class="toc-text">LED、LCD and Key quick start</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LED-LED-Display-and-Floating"><span class="toc-number">1.1.1.</span> <span class="toc-text">LED - LED Display and Floating</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LCD-Display-and-show-Info"><span class="toc-number">1.1.2.</span> <span class="toc-text">LCD - Display and show Info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Key-Trigger-mode-and-event"><span class="toc-number">1.1.3.</span> <span class="toc-text">Key - Trigger mode and event</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/11/Signal&amp;System/Signal-System-Chapter06/" title="Signal&amp;System Conclusion Chapter06-08">Signal&amp;System Conclusion Chapter06-08</a><time datetime="2024-12-10T16:00:00.000Z" title="Created 2024-12-11 00:00:00">2024-12-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/10/Signal&amp;System/Signal-System-Chapter04/" title="Signal&amp;System Conclusion Chapter04-05 &amp; 09-10">Signal&amp;System Conclusion Chapter04-05 &amp; 09-10</a><time datetime="2024-12-09T16:00:00.000Z" title="Created 2024-12-10 00:00:00">2024-12-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/09/Signal&amp;System/Signal-System-Chapter01/" title="Signal&amp;System Conclusion Chapter01-03">Signal&amp;System Conclusion Chapter01-03</a><time datetime="2024-12-08T16:00:00.000Z" title="Created 2024-12-09 00:00:00">2024-12-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/25/STM32H723_ADC/STM32H723-ADC/" title="STM32H723-ADC">STM32H723-ADC</a><time datetime="2024-11-24T16:00:00.000Z" title="Created 2024-11-25 00:00:00">2024-11-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/22/LanQiao_Baseboard_04/ADC-Single-Conversion/" title="LanQiao Baseboard Development's log03">LanQiao Baseboard Development's log03</a><time datetime="2024-11-21T16:00:00.000Z" title="Created 2024-11-22 00:00:00">2024-11-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/rene.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 By LuvRene</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">简</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>